<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
        <meta http-equiv="pragma" content="no-cache">
        <meta http-equiv="expires" content="0">
        <title>Admin Dashboard</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link rel="stylesheet" href="/view/admin/css/admin.css">
        <link rel="stylesheet" href="/view/admin/css/dashboard.css">
        <script src="/view/admin/js/order.js"></script>
    </head>
    <body>
        <header>
            <h3>Admin Area</h3>
            <div class="log-out">
                <h5>Log out</h5>
                <svg xmlns="http://www.w3.org/2000/svg" height="25" width="25" viewBox="0 0 512 512" style="fill:white;">
                    <path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/>
                </svg>
            </div>
        </header>
        <div class="full-page">
            <div class="admin-bar">
                <ul>
                    <li id="dashboard">
                        <div class="admin-bar-items">
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 512 512" style="fill:white"> 
                                <path d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm320 96c0-26.9-16.5-49.9-40-59.3V88c0-13.3-10.7-24-24-24s-24 10.7-24 24V292.7c-23.5 9.5-40 32.5-40 59.3c0 35.3 28.7 64 64 64s64-28.7 64-64zM144 176a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm-16 80a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM400 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>
                            </svg>
                            <span>Dashboard</span>
                        </div>
                    </li>
                    <li id="categories">
                        <div class="admin-bar-items">
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="22" viewBox="0 0 576 512" style="fill:white"><
                                <path d="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"/>
                            </svg>
                            <span>Categories</span>
                        </div>
                    </li>
                    <li id="products">
                        <div class="admin-bar-items">
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 512 512" style="fill:white">
                                <path d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>
                            </svg>
                            <span>Products</span>
                        </div>
                    </li>
                    <li id="view-orders">
                        <div class="admin-bar-items">
                            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="18" viewBox="0 0 448 512" style="fill:white">
                                <path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/>
                            </svg>
                            <span>View Orders</span>
                        </div>
                    </li>
                </ul>
            </div>
            <section id="section-content">
                <div class="dashboard">
                    <div class="dashboard-top row">
                        <div class="total col-6">
                            <div class="summary row gap-5">
                                <div class="total-sale col-5">
                                    <div class="total-sale-content">
                                        <span class="total-title">Total sales:</span> <br>
                                        <span class="total-value" id="total-sales">{{ .Summary.Sales }}</span>
                                    </div>
                                </div>
                                <div class="total-revenue col-5">
                                    <div class="total-sale-content">
                                        <span class="total-title">Totoal revenue:</span> <br>
                                        <span class="total-value" id="total-revenue">{{ .Summary.Revenue }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="total-button">
                                <button type="button" class="btn btn-primary" id="filter-day">Day</button>
                                <button type="button" class="btn btn-secondary" id="filter-week">Week</button>
                                <button type="button" class="btn btn-info" id="filter-month">Month</button>
                            </div>
                            
                        </div>
                        <div class="admin-information col-6">
                            <div class="admin-information-content">
                                <h2>Nhom: 20</h2>
                                <h3>Mon hoc: Lap trinh ung dung web</h3>
                                <h4>GV: Do Thi Huong Lan</h4>
                                <p>Truong DH Cong nghe thong tin (DHQG-TPHCM)</p>
                            </div>
                            
                        </div>
                        
                    </div>

                    <div class="dashboard-bottom row">
                        <div class="top-products col-6">
                            <h4>Top products selling</h4>
                            <table style="overflow-y: auto;height: 500px;">
                                <thead>
                                    <th>No</th>
                                    <th>Name</th>
                                    <th style="width: 50px;">Category</th>
                                    <th>Price</th>
                                </thead>
                                <tbody>
                                    {{ range $index, $item := .Products }}
                                    <tr>
                                        <td>{{ $index }}</td>
                                        <td>{{ $item.Name }}</td>
                                        <td>{{ $item.Category_name }}</td>
                                        <td>{{ $item.Price }}</td>
                                    </tr>
                                    {{ end }}
                                </tbody>
                            </table>

                            
                        </div>
                        <div class="order-recently col-6">
                            <h4>Order recently</h4>
                            <table>
                                <thead>
                                    <th style="width: 20px; text-align: center;">Order Id</th>
                                    <th style="width: 20px; text-align: center;">User Email</th>
                                    <th style="width: 20px; text-align: center">Items</th>
                                    <th style="width: 20px; text-align: center;">Total</th>
                                </thead>
                                <tbody>
                                    {{ range .Orders }}
                                    <tr>
                                        <td>{{ .Id }}</td>
                                        <td>{{ .User_email }}</td>
                                        <td>{{ .Items }}</td>
                                        <td>{{ .Total }}</td>
                                    </tr>
                                    {{ end }}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <script>
            $(document).ready(function() {
                $('#filter-day').click(function() {
                    fetch('/admin/sales/filter?type=day', {
                        method: 'GET'
                    })
                    .then(response => response.json())
                    .then(data => {
                        let sales = data.data[0].sales
                        let revenue = data.data[0].revenue

                        $('#total-sales').text(sales)
                        $('#total-revenue').text(revenue)
                    })
                })

                $('#filter-week').click(function() {
                    fetch('/admin/sales/filter?type=month', {
                        method: 'GET'
                    })
                    .then(response => response.json())
                    .then(data => {
                        let sales = data.data[0].sales
                        let revenue = data.data[0].revenue

                        $('#total-sales').text(sales)
                        $('#total-revenue').text(revenue)
                    })
                })

                $('#filter-month').click(function() {
                    fetch('/admin/sales/filter?type=month', {
                        method: 'GET'
                    })
                    .then(response => response.json())
                    .then(data => {
                        let sales = data.data[0].sales
                        let revenue = data.data[0].revenue

                        $('#total-sales').text(sales)
                        $('#total-revenue').text(revenue)
                    })
                })
            })
        </script>
    </body>
</html>